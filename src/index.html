<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>IPIF Visualizer</title>
    
        <link rel="icon" href="favicon.svg" type="image/svg+xml">
        <link rel="alternate icon" href="favicon.png" type="image/png">
    
        <link rel="stylesheet" href="css/components.css">
        <link rel="stylesheet" href="css/style.css">
    
        <script src="https://unpkg.com/cytoscape/dist/cytoscape.min.js"></script>
        <script src="https://unpkg.com/dagre@0.8.5/dist/dagre.min.js"></script>
        <script src="https://unpkg.com/cytoscape-dagre@2.5.0/cytoscape-dagre.js"></script>
    </head>
    <body>

        <header>
            <div class="header-left">
                <h1>IPIF Visualizer</h1>
            </div>
            <div class="header-center">
                <div class="filter-container">
                    <select id="domain-filter">
                        <option value="">All Domains</option>
                        </select>
                    <select id="program-filter">
                        <option value="">All Programs</option>
                        </select>
                    <select id="provider-filter">
                        <option value="">All Providers</option>
                        </select>
                    </div>
            </div>
            <div class="header-right">
                </div>
        </header>

        <main>
            <div id="visualizationContainer" style="position: relative; height: calc(100vh - 60px); width: 100%;">
                <div id="cy"></div> <div id="legendWrapper" class="graph-legend-wrapper">
                    <button id="legend-toggle" title="Show/Hide Legend">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="currentColor" class="legend-icon"><path d="M3 11h8V3H3v8zm0 10h8v-8H3v8zm10 0h8v-8h-8v8zm0-18v8h8V3h-8z"></path></svg>
                        </button>
                    <div id="legendContent" class="graph-legend-content" style="display: none;">
                        <h4>Legend</h4>
                        <h5>Status</h5>
                        <p><span class="legend-color-box" style="background-color: #4CAF50;"></span> Completed</p>
                        <p><span class="legend-color-box" style="background-color: #FFC107;"></span> In Progress</p>
                        <p><span class="legend-color-box" style="background-color: #9E9E9E;"></span> Planned</p>
                        <p><span class="legend-color-box" style="background-color: #F44336; border: 1px solid black;"></span> Expired</p>
                        <h5>Type</h5>
                        <p><span class="legend-shape-hexagon"></span> Certification</p>
                        <p><span class="legend-shape-rectangle"></span> Course</p>
                        <p><span class="legend-shape-star"></span> Milestone</p>
                        <p><span class="legend-shape-diamond"></span> Maintenance</p>
                        <h5>Edges</h5>
                        <p><span class="legend-edge-solid">──</span> Prerequisite</p>
                        <p><span class="legend-edge-dotted">‑‑‑</span> Maintenance</p>

                    </div>
                </div> </div> </main>


        <div id="detailModal" class="modal" style="display: none;">
            <div class="modal-content">
                <span class="close-button" id="closeDetailModal">&times;</span>
                <h2 id="detailName">Node Name</h2>
                <p><strong>ID:</strong> <span id="detailId"></span></p>
                <p><strong>Type:</strong> <span id="detailType"></span></p>
                <p><strong>Domain:</strong> <span id="detailDomain"></span></p>
                <p><strong>Status:</strong> <span id="detailStatus"></span></p>
                <p><strong>Completed:</strong> <span id="detailCompletionDate"></span></p>
                <p><strong>Expires:</strong> <span id="detailExpiryDate"></span></p>
                <p><strong>Provider:</strong> <span id="detailProvider"></span></p>
                <p><strong>Programs:</strong> <span id="detailPrograms"></span></p>
                <p><strong>Tags:</strong> <span id="detailTags"></span></p>
                <p><strong>Notes:</strong></p>
                <pre id="detailNotes"></pre>
                <button id="editNodeButton" style="display: none;">Edit</button> </div>
        </div>

        <div id="editModal" class="modal" style="display: none;">
            <div class="modal-content">
                <span class="close-button" id="closeEditModal">&times;</span>
                <h2>Edit Item</h2>
                <form id="editForm">
                    <input type="hidden" id="editId">

                    <label for="editName">Name:</label><br>
                    <input type="text" id="editName" name="name" required><br>

                    <label for="editType">Type:</label><br>
                    <select id="editType" name="type">
                        <option value="Certification">Certification</option>
                        <option value="Course">Course</option>
                        <option value="Module">Module</option>
                        <option value="Skill">Skill</option>
                        <option value="Milestone">Milestone</option>
                        <option value="MaintenanceActivity">MaintenanceActivity</option>
                    </select><br>

                    <label for="editDomain">Domain:</label><br>
                    <input type="text" id="editDomain" name="domain"><br>

                    <label for="editStatus">Status:</label><br>
                    <select id="editStatus" name="status">
                        <option value="Planned">Planned</option>
                        <option value="In Progress">In Progress</option>
                        <option value="Completed">Completed</option>
                        <option value="Expired">Expired</option>
                    </select><br>

                    <label for="editCompletionDate">Completion Date:</label><br>
                    <input type="date" id="editCompletionDate" name="completion_date"><br>

                    <label for="editExpiryDate">Expiry Date:</label><br>
                    <input type="date" id="editExpiryDate" name="expiry_date"><br>

                    <label for="editProvider">Provider:</label><br>
                    <input type="text" id="editProvider" name="provider"><br>

                    <label for="editPrograms">Programs (comma-separated):</label><br>
                    <input type="text" id="editPrograms" name="programs"><br>

                    <label for="editTags">Tags (comma-separated):</label><br>
                    <input type="text" id="editTags" name="tags"><br>

                    <label for="editNotes">Notes:</label><br>
                    <textarea id="editNotes" name="notes" rows="4"></textarea><br>

                    <button type="submit">Save Changes</button>
                    <button type="button" id="cancelEdit">Cancel</button>
                </form>
            </div>
        </div>

        <script type="module" src="js/main.js"></script>

    </body>
</html>